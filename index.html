<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>글자 수 & 형태소</title>
  <style>
    :root{--primary:#6c63ff;--bg:#f7f7f7;--card:#fff;--text:#333}
    *{box-sizing:border-box;margin:0;padding:0}
    body{background:var(--bg);font-family:'Pretendard','Noto Sans KR',sans-serif;color:var(--text)}
    .container{max-width:800px;margin:40px auto;padding:20px;background:var(--card);border:2px solid var(--primary);border-radius:8px}
    .tabs{display:flex;border-bottom:2px solid var(--primary);margin-bottom:20px}
    .tabs button{flex:1;padding:12px 0;background:none;border:none;border-bottom:3px solid transparent;color:var(--text);cursor:pointer;transition:.2s}
    .tabs button.active{border-color:var(--primary);color:var(--primary);font-weight:bold}
    .panel{display:none}
    .panel.active{display:block}
    textarea{width:100%;height:200px;padding:10px;font-size:15px;border:1px solid var(--primary);border-radius:4px;margin-bottom:16px;resize:vertical}
    .results p{margin:6px 0}
    button.copy{padding:10px 20px;background:var(--primary);color:#fff;border:none;border-radius:4px;cursor:pointer;transition:.2s}
    button.copy:hover{background:#514bc1}
    #morphList{list-style:none;padding:0;max-height:200px;overflow-y:auto}
    #morphList li{padding:6px 0;border-bottom:1px solid #eee}
  </style>
</head>
<body>
  <div class="container">
    <div class="tabs">
      <button class="active" data-target="countTab">글자 수</button>
      <button data-target="morphTab">형태소</button>
    </div>
    <div id="countTab" class="panel active">
      <textarea id="countInput" placeholder="텍스트를 입력하세요"></textarea>
      <div class="results">
        <p>문자 수 (공백 포함): <span id="countInclude">0</span></p>
        <p>문자 수 (공백 제외): <span id="countExclude">0</span></p>
        <p>단어 수: <span id="wordCount">0</span></p>
      </div>
      <button class="copy" id="copyBtn">복사</button>
    </div>
    <div id="morphTab" class="panel">
      <textarea id="morphInput" placeholder="형태소를 분석할 텍스트를 입력하세요"></textarea>
      <ul id="morphList"><li>분석 준비 중…</li></ul>
    </div>
  </div>
  <script>
    // 탭 전환
    document.querySelectorAll('.tabs button').forEach(btn=>btn.addEventListener('click',()=>{
      document.querySelectorAll('.tabs button').forEach(b=>b.classList.remove('active'));
      document.querySelectorAll('.panel').forEach(p=>p.classList.remove('active'));
      btn.classList.add('active');
      document.getElementById(btn.dataset.target).classList.add('active');
    }));
    // 글자 수 기능
    const ci=document.getElementById('countInput');
    ci.addEventListener('input',()=>{
      const t=ci.value;
      document.getElementById('countInclude').textContent=t.length;
      document.getElementById('countExclude').textContent=t.replace(/\s/g,'').length;
      document.getElementById('countInclude');
      document.getElementById('wordCount').textContent=t.trim()?t.trim().split(/\s+/).length:0;
    });
    document.getElementById('copyBtn').addEventListener('click',()=>navigator.clipboard.writeText(ci.value));
    // 형태소 분석
    const mi=document.getElementById('morphInput'), ml=document.getElementById('morphList');
    mi.addEventListener('input',async()=>{
      const txt=mi.value.trim(); if(!txt){ml.innerHTML='<li>분석 준비 중…</li>';return;}
      try{
        const api=`https://open-korean-text.herokuapp.com/tokenize?text=${encodeURIComponent(txt)}`;
        const proxy=`https://api.allorigins.win/raw?url=${encodeURIComponent(api)}`;
        const res=await fetch(proxy); const data=await res.json(); const tokens=data.tokens||data;
        ml.innerHTML=tokens.map(e=>`<li>${e.text}<small>(${e.pos})</small></li>`).join('');
      }catch{ml.innerHTML='<li>분석 준비 중…</li>'}
    });
  </script>
</body>
</html>
